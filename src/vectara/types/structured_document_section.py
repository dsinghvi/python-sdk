# This file was auto-generated by Fern from our API Definition.

from __future__ import annotations

import datetime as dt
import typing

import pydantic.v1 as pydantic

from ..core.datetime_utils import serialize_datetime
from ..core.pydantic_utilities import deep_union_pydantic_dicts


class StructuredDocumentSection(pydantic.BaseModel):
    """
    A logical section within a structured document.
    """

    id: typing.Optional[int] = pydantic.Field(default=None)
    """
    The section ID. Gets converted to a metadata field.
    """

    title: typing.Optional[str] = pydantic.Field(default=None)
    """
    The section title.
    """

    text: str = pydantic.Field()
    """
    The text of the section.
    """

    metadata: typing.Optional[typing.Dict[str, typing.Any]] = pydantic.Field(default=None)
    """
    Arbitrary object that becomes document part level metadata on any document part created
    by this section. Properties of this object can be used by document part level
    filters if defined as a corpus filter attribute.
    """

    sections: typing.Optional[typing.List[StructuredDocumentSection]] = pydantic.Field(default=None)
    """
    The sections that this section contains.
    """

    def json(self, **kwargs: typing.Any) -> str:
        kwargs_with_defaults: typing.Any = {"by_alias": True, "exclude_unset": True, **kwargs}
        return super().json(**kwargs_with_defaults)

    def dict(self, **kwargs: typing.Any) -> typing.Dict[str, typing.Any]:
        kwargs_with_defaults_exclude_unset: typing.Any = {"by_alias": True, "exclude_unset": True, **kwargs}
        kwargs_with_defaults_exclude_none: typing.Any = {"by_alias": True, "exclude_none": True, **kwargs}

        return deep_union_pydantic_dicts(
            super().dict(**kwargs_with_defaults_exclude_unset), super().dict(**kwargs_with_defaults_exclude_none)
        )

    class Config:
        frozen = True
        smart_union = True
        extra = pydantic.Extra.allow
        json_encoders = {dt.datetime: serialize_datetime}


StructuredDocumentSection.update_forward_refs()
